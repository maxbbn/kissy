/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Apr 11 17:44
*/
KISSY.add("chart/axis",function(k,r){function p(d,b){this.chart=b;this.type=d.type;this.data=d;this.axisData=d.axis();this.current_x=-1;this.initEvent();k.each(this.axisData,function(c){c.name=c.name?c.name:false});this.initdata()}var l=k.Event;k.augment(p,k.EventTarget,{initYLabel:function(){var d=this.data.config,b=this.chart.height,c=this.axisData,a=this.data.getMax(b);d=Math.ceil((b-d.paddingBottom-d.paddingTop)/40);a=a/d;b=[];for(i=0;i<=d;i++)b.push(a*i);c.y.labels=b},initdata:function(d){this.initYLabel();
var b=this.chart,c=b.width,a=b.height,e=this.data.config;d=this.axisData;b=d.x;d=d.y;var h=b.labels.length,f=d.labels.length;c=c-e.paddingRight;var g=e.paddingLeft,j=a-e.paddingBottom;e=e.paddingTop;var o=(j-e)/(f-1),m=c-g,n,q,s=Math.ceil(120*h/m);b._lpath={x:c*2-g,y:a-j+20};b._path=[];b._area=[];b._showlabel=[];for(i=0;i<h;i++){if(this.type==="line"){n=m/(h-1);a=g+i*n;q=i===0?a:a-n/2;n=i===h-1?a:a+n/2}else{n=m/h;a=g+(i+0.5)*n;q=a-n/2;n=a+n/2}b._showlabel.push(i===0||i%s===0);b._path.push({left:q,
right:n,top:e,bottom:j,x:a});b._area.push(new r.RectPath(q,e,n-q,j-e))}d._lpath={x:(j-e)/2+e,y:-10};d._path=[];for(i=0;i<f;i++)d._path.push({y:j-o*i,left:g,right:c})},initEvent:function(){if(this.type==="line"){l.on(this.chart,"mouse_move",this.chartMouseMove,this);l.on(this.chart,"mouse_leave",this.chartMouseLeave,this)}},destory:function(){if(this.type==="line"){l.remove(this.chart,"mouse_move",this.chartMouseMove);l.remove(this.chart,"mouse_leave",this.chartMouseLeave)}},chartMouseMove:function(d){var b=
this;k.each(b.axisData.x._area,function(c,a){if(a!==b.current_x&&c.inpath(d.x,d.y)){b.current_x=a;b.fire("xaxishover",{index:a,x:b.axisData.x._path[a].x});b.fire("redraw");return false}})},chartMouseLeave:function(){this.current_x=-1;this.fire("redraw");this.fire("leave")},draw:function(d){var b=this.data.config,c=this.data.axis(),a=c.x,e=c.y,h=a.labels.length,f=e.labels.length,g=this.chart.width,j=this.type==="line",o=this.type==="bar",m,n;d.save();for(m=0;m<f;m++){n=e._path[m];c=e.labels[m];if(m%
2===1&&m>0){d.save();d.fillStyle=b.axisBackgroundColor;d.fillRect(n.left,n.y,n.right-n.left,e._path[m-1].y-n.y);d.restore()}if(m!==0&&m!==f-1){d.strokeStyle=b.axisGridColor;d.lineWidth="1.0";d.beginPath();d.moveTo(n.left,n.y);d.lineTo(n.right,n.y);d.stroke()}if(c){d.font="12px Tohoma";d.textAlign="right";d.textBaseline="middle";d.fillStyle=b.axisTextColor;d.fillText(c,n.left-5,n.y)}}for(m=0;m<h;m++){f=m===this.current_x;e=a._path[m];c=a.labels[m];n=a._showlabel[m];d.strokeStyle=j&&f?"#404040":b.axisGridColor;
d.lineWidth=j&&f?"1.6":"1.0";if(o)if(m!==0){d.beginPath();d.moveTo(e.left,e.bottom);d.lineTo(e.left,e.top);d.stroke()}if(j)if(m!==0&&m!==h-1){d.beginPath();d.moveTo(e.x,e.bottom);d.lineTo(e.x,e.top);d.stroke()}if(c&&n){d.font="13px Tahoma";d.textAlign=j&&m===0?"left":j&&m===h-1?"right":"center";d.textBaseline="top";d.fillStyle=b.axisTextColor;d.fillText(c,e.x,e.bottom+5)}}if(this.current_x!==-1){e=a._path[this.current_x];c=a.labels[this.current_x];d.font="12px Tahoma";a=d.measureText(c).width+6;d.fillStyle=
"#333";h=Math.max(e.x-a/2,b.paddingLeft);h=Math.min(h,g-b.paddingRight-a);d.fillRect(h,e.bottom,a,20);d.textAlign="left";d.fillStyle="#ffffff";d.fillText(c,h+2,e.bottom+5)}d.restore();this.drawLabels(d)},drawLabels:function(d){var b=this.data.axis(),c=this.data.config,a=b.y.name,e=b.x.name,h=b.x._lpath;b=b.y._lpath;if(!(c.hideYAxisName&&c.hideXAxisName)){d.save();d.font="10px Arial";d.fillStyle="#808080";d.textAlign="center";d.textBaseline="middle";c.hideXAxisName||d.fillText("("+e+")",h.x,h.y);if(!c.hideYAxisName){d.rotate(Math.PI/
2);d.translate(b.x,b.y);d.fillText("("+a+")",0,0)}d.restore()}}});return p},{requires:["chart/path"]});
KISSY.add("chart/chart",function(k,r,p,l,d,b,c){function a(){this.list=[];this.current_index=-1;this.init()}function e(f,g){if(!(this instanceof e))return new e(f,g);var j=this.elCanvas=k.one(f);if(j){this.width=parseInt(j.attr("width"),10);this.height=parseInt(j.attr("height"),10);this.elCanvas=j;this.ctx=-1;this.tooltip=chartManager.getTooltip();if(g){this.data=g;this._initContext()}chartManager.add(this)}}var h={left:40,top:40};k.augment(a,k.EventTarget,{add:function(f){var g=this,j;g.list.push(f);
j=g.list.length-1;f.on("active",function(){g.current_index!==j&&g.fire("focusChange");g.current_index=j})},remove:function(f){f.detach("mouseenter");k.each(self.list,function(g,j){if(g===j)self.list[j]=null})},getTooltip:function(){if(!this.tooltip)this.tooltip=new l;return this.tooltip},init:function(){k.one("body").on("mousemove",this._bodyMouseMove,this);return this},_bodyMouseMove:function(f){var g,j;if(this.current_index>-1)g=this.list[this.current_index];if(g){j=f.pageX-g.offset.left;f=f.pageY-
g.offset.top;j>0&&j<g.width&&f>0&&f<g.height?g.fire("mouse_move",{x:j,y:f}):g.fire("mouse_leave")}}});k.mix(e,{addType:function(f){k.mix(e.types,f)},types:{}});k.extend(e,k.Base,{render:function(f){var g=this;if(f)g.data=f;if(g.ctx==-1){g.data=f;g._initContext()}else if(g.ctx!==0){g._drawcfg=k.merge(h,f.config,{width:g.width,height:g.height});g._data=new p(f,g._drawcfg);f=g._data;g.initChart();g.element=new e.types[f.type](f,this,g._drawcfg);g.layers.push(g.element);f=f.config;var j=g.ctx.createLinearGradient(0,
0,0,g.height);g.backgroundFillStyle=null;if(f.backgroundStyle&&typeof f.backgroundStyle==="object"){j.addColorStop(0,f.backgroundStyle.start);j.addColorStop(1,f.backgroundStyle.end);g.backgroundFillStyle=j}else if(k.isString(f.backgroundStyle))g.backgroundFillStyle=f.backgroundStyle;setTimeout(function(){g._redraw();g.initEvent()},100)}},_initContext:function(){var f=this;if(typeof f.ctx!="object")if(f.elCanvas[0].getContext)setTimeout(function(){f.ctx=f.elCanvas[0].getContext("2d");f._contextReady()},
0);else{f.ctx=0;f._count=typeof f._count=="number"?f._count-1:30;f._count>=0?setTimeout(function(){f._initContext()},50):k.one("<p class='ks-chart-error' >\u7cdf\u4e86\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u8fd8\u4e0d\u652f\u6301\u6211\u4eec\u7684\u56fe\u8868</p>").insertAfter(f.elCanvas)}},_contextReady:function(){this.data&&this.render(this.data)},loading:function(){this.showMessage("\u8f7d\u5165\u4e2d...")},showMessage:function(f){var g=this.ctx,j=this.width/2,o=this.height/2;g.clearRect(0,0,this.width,this.height);g.save();g.font="12px Arial";g.textAlign="center";g.fillStyle="#808080";g.fillText(f,
j,o);g.restore()},initChart:function(){this.layers=[];this._updateOffset();this.loading();if(this.element){this.element.destory();this.element=null}if(this._event_inited){this.elCanvas.detach("mouseenter",this._mouseenterHandle).detach("mouseleave",this._mouseLeaveHandle);this.detach()}this.tooltip.hide()},initEvent:function(){var f=this;f._event_inited=true;f.elCanvas.on("mouseenter",f._mouseenterHandle,f).on("mouseleave",f._mouseLeaveHandle,f);f.on("mouse_leave",f._drawAreaLeave,f);f.element.on("redraw",
f._redraw,f).on("showtooltip",function(g){g=k.isString(g.message)?g.message:g.message.innerHTML;f.tooltip.show(g)}).on("hidetooltip",function(){f.tooltip.hide()})},draw:function(){var f=this.ctx,g=this._drawcfg;if(this.backgroundFillStyle){f.fillStyle=this.backgroundFillStyle;f.fillRect(0,0,g.width,g.height)}else f.clearRect(0,0,g.width,g.height);k.each(this.layers,function(j){j.draw(f,g)})},ctx:function(){if(this.ctx)return this.ctx;if(this.elCanvas[0].getContext)return this.ctx=this.elCanvas.getContext("2d");
else return null},_redraw:function(){this._redrawmark=true;this._running||this._run()},_run:function(){var f=this;clearTimeout(f._timeoutid);f._running=true;f._redrawmark=false;f._timeoutid=setTimeout(function(){f.draw();if(f._redrawmark)f._run();else f._running=false},1E3/24)},_drawAreaLeave:function(){this.tooltip.hide()},_mouseenterHandle:function(){this._updateOffset();this.fire("active")},_updateOffset:function(){return this.offset=this.elCanvas.offset()},_mouseLeaveHandle:function(){this.fire("mouse_leave")}});
e.addType(d);e.addType(b);e.addType(c);chartManager=window.chartManager=new a;return k.Chart=e},{requires:["chart/util","chart/data","chart/simpletooltip","chart/chart_line","chart/chart_bar","chart/chart_pie"]});
KISSY.add("chart/chart_bar",function(k,r,p,l,d){function b(c,a,e){this.data=c;this.chart=a;this.drawcfg=e;this.config=c.config;this.initData(e);this.current=[-1,-1];this.anim=new r.Anim(this.config.animationDuration,this.config.animationEasing);this.axis=new l(c,a);this.frame=new d(a,c);this.anim.init();this.initEvent()}k.augment(b,k.EventTarget,{initData:function(){var c=this,a=c.chart,e=a.width,h=a.height,f=c.data;a=f.config;var g=f.elements().length,j=f.maxElementLength(),o=a.paddingTop,m=a.paddingLeft,
n=h-a.paddingBottom,q=(e-a.paddingRight-m)/j,s=q/5/g,u=q/3/g,w=(q-(g-1)*s-2*u)/g,z=[],y,C,t,D;c.maxLength=j;c.items=z;c.data.eachElement(function(G,A,v){if(v===-1)v=0;z[A]||(z[A]={_x:[],_top:[],_left:[],_path:[],_width:[],_height:[],_colors:[],_dcolors:[],_labels:[]});var B=z[A];y=(n-o)*G.data/f.getMax(h);C=m+v*q+u+A*(w+s);t=n-y;D=r.Color(c.data.getColor(A,"bar"));A=D.hslData();var E=A[2],F=A[1];E=(E+F/2)*0.6-F/2;colord=new r.Color.hsl(A[0],F,E);B._left[v]=C;B._top[v]=t;B._width[v]=w;B._height[v]=
y;B._path[v]=new p.RectPath(C,t,w,y);B._x[v]=C+w/2;B._colors[v]=D;B._dcolors[v]=colord;B._labels[v]=G.label})},draw:function(c){var a=this,e=a.items,h=a.maxLength,f,g,j,o,m,n,q=a.anim.get(),s;a.axis.draw(c);a.frame.draw(c);a.data.config.showLabels&&a.drawNames(c);k.each(e,function(u,w){for(s=0;s<h;s++){m=u._left[s];j=u._height[s];o=j*q;n=u._top[s]+j-o;barwidth=u._width[s];f=u._colors[s];dcolor=u._dcolors[s];g=c.createLinearGradient(m,n,m,n+o);g.addColorStop(0,f.css());g.addColorStop(1,dcolor.css());
c.fillStyle=g;c.fillRect(m,n,barwidth,o);if(h===1&&j>25){c.save();c.fillStyle="#fff";c.font="20px bold Arial";c.textBaseline="top";c.textAlign="center";element=a.data.elements()[w];c.fillText(r.numberFormat(element.data,element.format),u._x[s],n+2);c.restore()}}});q<1&&a.fire("redraw")},initEvent:function(){this.chart.on("mouse_move",this.chartMouseMove,this);this.chart.on("mouse_leave",this.chartMouseLeave,this)},destory:function(){this.chart.detach("mouse_move",this.chartMouseMove);this.chart.detach("mouse_leave",
this.chartMouseLeave)},chartMouseMove:function(c){var a=[-1,-1],e=this.items;k.each(this.items,function(h,f){k.each(h._path,function(g,j){if(g.inpath(c.x,c.y))a=[f,j]})});if(!(a[0]===this.current[0]&&a[1]===this.current[1])){this.current=a;if(a[0]+a[1]>=0){this.fire("barhover",{index:a});this.fire("showtooltip",{top:e[a[0]]._top[a[1]],left:e[a[0]]._x[a[1]],message:this.getTooltip(a)})}else this.fire("hidetooltip")}},chartMouseLeave:function(){this.current=[-1,-1]},getTooltip:function(c){var a=c[1];
c=this.items[c[0]];return"<div class='bartip'><span style='color:"+c._colors[a].css()+";'>"+c._labels[a]+"</span></div>"},drawNames:function(c){var a=this.chart.width,e=this.data,h=this.data.elements(),f=e.config,g=h.length-1;a=a-f.paddingRight;f=f.paddingTop-12;for(var j,o;g>=0;g--){j=h[g];if(!j.notdraw){o=e.getColor(g);c.save();c.textAlign="end";c.textBaseline="middle";c.fillStyle="#808080";c.font="12px Arial";c.fillText(j.name,a,f);a-=c.measureText(j.name).width+10;c.restore();c.save();c.beginPath();
c.fillStyle=o;c.arc(a,f,5,0,Math.PI*2,true);c.closePath();c.fill();c.restore();a-=10}}}});return{bar:b}},{requires:["chart/util","chart/path","chart/axis","chart/frame"]});
KISSY.add("chart/chart_line",function(k,r,p,l){function d(b,c,a){this.chart=c;this.data=b;this.elements=b.elements();this._current=-1;this.config=b.config;this.drawcfg=a;this.initdata(a);this._ready_idx=-1;this.anim=new r.Anim(this.config.animationDuration,this.config.animationEasing);this.axis=new p(b,c,a);this.frame=new l(c,b);this.anim.init();this.init()}k.augment(d,k.EventTarget,{initdata:function(){var b=this.data,c=this.chart,a=c.width,e=c.height,h=b.config;c=b.maxElementLength();var f=h.paddingLeft,
g=b.getMax(e),j=e-h.paddingBottom;e=j-h.paddingTop;a=a-h.paddingRight-f;var o=a/(c-1),m=[];this.items=m;b.eachElement(function(n,q,s){m[q]||(m[q]={_points:[],_labels:[],_color:b.getColor(q),_maxtop:j,_drawbg:q===h.drawbg,_notdraw:n.notdraw});q=m[q];ptop=Math.max(j-n.data/g*e,h.paddingTop-5);q._maxtop=Math.min(q._maxtop,ptop);q._labels[s]=n.label;q._points[s]={x:f+o*s,y:ptop,nodata:n.data===null,bottom:j}})},draw:function(b,c){var a=this,e=a.data,h=e.config,f=h.paddingLeft,g=c.width-h.paddingRight,
j=c.height-h.paddingBottom,o,m,n,q,s,u,w=a.anim.get(),z;a.axis.draw(b,c);a.frame.draw(b,c);e.config.showLabels&&a.drawNames(b,c);if(w>=1&&this._ready_idx<a.items.length-1){a._ready_idx++;a.anim.init();w=a.anim.get()}if(this._ready_idx!==e.elements().length-1||w!==1)this.fire("redraw");k.each(a.items,function(y,C){var t;if(!y._notdraw){u=C!==a._ready_idx?C>a._ready_idx?0:1:w;o=y._color;n=y._points;if(y._drawbg){b.save();b.globalAlpha=0.4;maxtop=j-(j-y._maxtop)*u;z=b.createLinearGradient(f,maxtop,f,
j);z.addColorStop(0,o);z.addColorStop(1,"rgb(255,255,255)");b.fillStyle=z;b.beginPath();b.moveTo(f,j);for(q=0;q<n.length;q++){t=n[q];if(!t.nodata){m=j-(j-t.y)*u;b.lineTo(t.x,m)}}b.lineTo(g,j);b.stroke();b.fill();b.restore()}b.save();s=n.length;b.strokeStyle=o;b.lineWidth=2;b.beginPath();for(q=0;q<s;q++){t=n[q];if(!t.nodata){m=j-(j-t.y)*u;q===0?b.moveTo(t.x,m):b.lineTo(t.x,m)}}b.stroke();b.restore();b.save();for(q=0;q<s;q++){t=n[q];if(!t.nodata){m=j-(j-t.y)*u;b.fillStyle=o;b.beginPath();b.arc(t.x,
m,5,0,Math.PI*2,true);b.closePath();b.fill();if(q!==a._current){b.fillStyle="#fff";b.beginPath();b.arc(t.x,m,3,0,Math.PI*2,true);b.closePath();b.fill()}}}b.restore()}})},init:function(){this._ready_idx=0;this.axis.on("xaxishover",this._axis_hover,this).on("leave",this._axis_leave,this).on("redraw",this._redraw,this)},destory:function(){this.axis.detach("xaxishover",this._axis_hover).detach("leave",this._axis_leave).detach("redraw",this._redraw)},_redraw:function(){this.fire("redraw")},_axis_hover:function(b){b=
b.index;if(this._current!==b){this._current=b;this.fire("redraw");this.fire("showtooltip",{message:this.getTooltip(b)})}},_axis_leave:function(){this._current=-1;this.fire("redraw")},getTooltip:function(b){var c,a;c="<ul>";k.each(this.items,function(e){if(!e._points[b].nodata){a='<li><p style="color:'+e._color+'">'+e._labels[b]+"</p></li>";c+=a}});c+="</ul>";return c},drawNames:function(b){var c=this.chart.width,a=this.data,e=a.config;a=a.elements();var h=a.length-1;c=c-e.paddingRight;e=e.paddingTop-
12;for(var f,g;h>=0;h--){f=a[h];if(!f.notdraw){g=this.data.getColor(h);b.save();b.textAlign="end";b.textBaseline="middle";b.fillStyle="#808080";b.font="12px Arial";b.fillText(f.name,c,e);c-=b.measureText(f.name).width+10;b.restore();b.save();b.beginPath();b.fillStyle=g;b.arc(c,e,5,0,Math.PI*2,true);b.closePath();b.fill();b.restore();c-=10}}}});return{line:d}},{requires:["chart/util","chart/axis","chart/frame"]});
KISSY.add("chart/chart_pie",function(k,r){function p(d){if(k.isString(d))d=r.Color(d);d=d.hslData();var b=d[1],c=d[2];c=(c+b*0.5)*1.05-b*0.5;return new r.Color.hsl(d[0],b,c)}function l(d,b){this.data=d;this.chart=b;this.type=0;this.config=d.config;this.initdata();this.init();this.anim=new r.Anim(this.config.animationDuration,this.config.animationEasing);this.anim.init()}k.augment(l,k.EventTarget,{initdata:function(){var d=this,b=d.chart,c=b.width;b=b.height;var a=d.data,e=a.config,h=0,f,g,j,o;d._x=
a.config.showLabels?c*0.618/2:c/2;d._y=b/2;d._r=Math.min(b-e.paddingTop-e.paddingBottom,c-e.paddingLeft-e.paddingRight)/2;d._r=Math.min(d._r,d._x-e.paddingLeft);d._lx=c*0.618;d.angleStart=-Math.PI/4;d.antiClock=true;d.items=[];d._currentIndex=-1;h=a.sum();o=0;k.each(a.elements(),function(m,n){j=m.data/h;f=o+j;g=a.getColor(n);d.items.push({start:o,end:f,color:g,color2:p(g).css(),textColor:"#999",labelRight:c-50,labelY:50+20*n});o=f;if(n===0)d.angleStart+=j*Math.PI})},drawLabels:function(d){var b=this,
c=b.data,a=b.items,e,h=c.sum(),f,g,j;d.save();d.textBaseline="middle";d.textAlign="right";c.eachElement(function(o,m){e=a[m];j=e.labelY;g=e.labelRight;d.fillStyle=a[m].color;d.beginPath();d.moveTo(g,j);d.font="15px sans-serif";d.fillRect(g-10,j-5,10,10);d.closePath();d.fillStyle=a[m].textColor;f=k.substitute(b.config.labelTemplate,{data:r.numberFormat(o.data,o.format),name:o.name,pecent:r.numberFormat(o.data/h*100,"0.00")});d.fillText(f,g-15,j)});d.restore()},draw:function(d){var b=this,c=b._x,a=
b._y,e=b._r,h,f,g=b.anim.get(),j=b.data.config;g<1&&b.fire("redraw");j.showLabels&&b.drawLabels(d);d.save();if(j.drawShadow){d.shadowBlur=j.shadow.blur;d.shadowColor=j.shadow.color}d.save();d.lineWidth=0.5;d.strokeStyle="#fff";k.each(b.items,function(o,m){h=o.start*g*2*Math.PI;f=o.end*g*2*Math.PI;d.save();d.fillStyle=m===b._currentIndex?o.color2:o.color;d.beginPath();o._currentStart=b.antiClock?b.angleStart-h:b.angleStart+h;o._currentEnd=b.antiClock?b.angleStart-f-0.0050:b.angleStart+f+0.0050;if(m===
0&&g>=1&&j.firstPieOut){d.moveTo(c+2,a-2);d.arc(c+2,a-2,e,o._currentStart,o._currentEnd,b.antiClock)}else{d.moveTo(c,a);d.arc(c,a,e,o._currentStart,o._currentEnd,b.antiClock)}d.closePath();d.fill();d.restore()});d.restore();d.restore()},init:function(){this.chart.on("mouse_move",this.chartMouseMove,this);this.chart.on("mouse_leave",this.chartMouseLeave,this)},destory:function(){this.chart.detach("mouse_move",this.chartMouseMove);this.chart.detach("mouse_leave",this.chartMouseLeave)},chartMouseMove:function(d){var b=
this._r,c=d.x-this._x,a=d.y-this._y,e;d=this.items;if(c*c+a*a>b*b){this.fire("hidetooltip");this._currentIndex=-1;this.fire("redraw")}else{if(c!=0){b=Math.atan(a/c);if(a<0&&c>0)b+=2*Math.PI;if(c<0)b+=Math.PI}else b=a>=0?Math.PI/2:3*Math.PI/2;for(i=d.length-1;i>=0;i--){a=d[i];c=a._currentStart;a=a._currentEnd;if(c>a){e=c;c=a;a=e}e=a-c;c%=Math.PI*2;if(c<0)if(c+e<0||b>Math.PI)c+=Math.PI*2;if(b>c&&b<c+e&&i!==this._currentIndex){this._currentIndex=i;this.fire("redraw");this.fire("showtooltip",{message:this.data.elements()[i].label})}}}},
chartMouseLeave:function(){this._currentIndex=-1;this.fire("hidetooltip");this.fire("redraw")}});return{pie:l}},{requires:["chart/util"]});
KISSY.add("chart/data",function(k,r){function p(b){if(!b.type)throw Error("Data: type is missing");if(!this instanceof p)return new p(b);var c=b.config;this._origin=b;b=k.clone(b);this.type=b.type.toLowerCase();this.config=c=k.merge(l,d[this.type],c);k.each({left:"paddingLeft",top:"paddingTop",bottom:"paddingBottom",right:"paddingRight"},function(a,e){if(e in c&&k.isNumber(c[e]))c[a]=c[e]});this._elements=this._expandElement(this._initElement(b));this._initElementItem();this._axis=b.axis}var l={paddingTop:30,
paddingLeft:40,paddingRight:20,paddingBottom:20,showLabels:true,colors:[],animationDuration:0.5,animationEasing:"easeInStrong",hideYAxisName:false,hideXAxisName:true,backgroundStyle:false,axisTextColor:"#999",axisBackgroundColor:"rgba(238, 238, 238, 0.4)",axisGridColor:"#e4e4e4",numberFormat:null,frameColor:"#d7d7d7"},d={line:{drawbg:-1},bar:{},pie:{animationDuration:1.8,animationEasing:"bounceOut",paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,drawShadow:true,shadow:{blur:3,color:"#000"},
labelTemplate:"{name} {pecent}%",firstPieOut:false}};k.augment(p,{axis:function(){return this._axis},elements:function(){return this._elements},maxElementLength:function(){var b=0;k.each(this._elements,function(c){b=k.isArray(c.items)?Math.max(b,c.items.length):Math.max(b,1)});return b},getColor:function(b,c){var a=this._elements.length,e=this.config.colors;if(k.isArray(e)&&e[b])return e[b];if(k.isFunction(e))return e(b);return this.getDefaultColor(b,a,c)},sum:function(){var b=0;this.eachElement(function(c){b+=
c.data});return b},max:function(){return this._max},getMax:function(b){var c=this.config;b=Math.ceil((b-c.paddingBottom-c.paddingTop)/40);c=this.max()/b;var a;if(c<=1)c=1;else if(c>1&&c<=5)c=Math.ceil(c);else if(c>5&&c<=10)c=10;else{a=1;do{a*=10;c/=10}while(c>10);c=Math.ceil(c)*a}return c*b},getDefaultColor:function(b,c){var a=1/3,e=a*b,h,f;if(b<3)e=a*b+0.05;else{if(c%3==0){if(b===c-1)b=c-2;if(b===c-2)b=c-1}e=b%3;h=Math.ceil(c/3);f=Math.ceil((b+1)/3);e=e*a+a/h*(f-1)}return r.Color.hsl(e,0.7,0.65).hexTriplet()},
eachElement:function(b){k.each(this._elements,function(c,a){c.items?k.each(c.items,function(e,h){b(e,a,h)}):b(c,a,-1)})},_initElement:function(b){var c=null,a;if(b.elements&&k.isArray(b.elements))c=k.clone(b.elements);if(!b.elements&&b.element&&k.isArray(b.element.names)){c=[];a=b.element;k.each(a.names,function(e,h){c.push({name:e,data:k.isArray(a.datas)?a.datas[h]:null,label:k.isArray(a.labels)?a.labels[h]:a.label})})}return c},_expandElement:function(b){k.each(b,function(c){if(k.isArray(c.datas)){c.items=
[];k.each(c.datas,function(a,e){var h={name:c.name,data:a};h.label=k.isArray(c.labels)?c.labels[e]:c.label;c.items.push(h)})}});return b},_initElementItem:function(){var b=this;b._max=0;b.eachElement(function(c,a,e){if(a===0&&!e)b._max=c.data||0;c.data=k.isNumber(c.data)?c.data:null;b._max=Math.max(b._max,c.data);if(k.isArray(b.config.numberFormat))c.format=b.config.numberFormat[a];else if(k.isString(b.config.numberFormat))c.format=b.config.numberFormat;if(typeof c.format=="undefined")c.format=b.config.numberFormat;
c.label=k.substitute(typeof c.label==="undefined"?"{name} - {data}":c.label,{name:c.name,data:c.format&&typeof c.data==="number"?r.numberFormat(c.data,c.format):c.data});if(b._elements[a].notdraw)c.notdraw=true})}});return p},{requires:["chart/util"]});
KISSY.add("chart/frame",function(k,r){function p(l,d){var b=d.config,c=l.width,a=l.height;this.data=d;this.path=new r.RectPath(b.paddingLeft,b.paddingTop,c-b.paddingRight-b.paddingLeft,a-b.paddingBottom-b.paddingTop)}k.augment(p,{draw:function(l){l.save();l.strokeStyle=this.data.config.frameColor;l.lineWidth=2;this.path.draw(l);l.stroke();l.restore()}});return p},{requires:["chart/path"]});KISSY.add("chart",function(k,r){return r},{requires:["chart/chart"]});
KISSY.add("chart/path",function(k){function r(){}function p(d,b,c,a){this.rect={x:d,y:b,w:c,h:a}}function l(d,b,c,a,e,h){this._arc={x:d,y:b,r:c,b:a,e:e,a:h}}k.augment(r,{draw:function(){},inpath:function(){}});k.extend(p,r,{draw:function(d){var b=this.rect;d.beginPath();d.rect(b.x,b.y,b.w,b.h)},inpath:function(d,b){var c=this.rect,a=c.x,e=c.y,h=a+c.w;c=e+c.h;return d>a&&d<h&&b>e&&b<c}});k.extend(l,r,{draw:function(d){var b=this._arc;d.beginPath();d.moveTo(b,x,b.y);d.arc(b.x,b.y,b.r,b.b,b.e,b.a);d.closePath()},
inpath:function(d,b,c){if(c){this.draw(c);return c.isPointInPath(d,b)}b=this._arc;c=d-b.x;d=d-b.y;if(!(Math.pow(c,2)+Math.pow(d,2)<=Math.pow(b.r,2)))return false;if(c===0)if(d===0)return false;else da=d>0?Math.PI/2:Math.PI*1.5}});return{Path:r,RectPath:p,ArcPath:l}});
KISSY.add("chart/simpletooltip",function(k){function r(){var p=this;p.n_c=k.all("<div class='ks-chart-tooltip'>");p._offset={left:0,top:0};p.hide();k.ready(function(){k.one("body").append(p.n_c).on("mousemove",p._mousemove,p)})}k.augment(r,{_mousemove:function(p){var l=p.pageX;p=p.pageY;if(this._show)this._updateOffset(l,p);else{this._offset.left=l;this._offset.top=p}},_updateOffset:function(p,l){var d=k.DOM;if(p>d.scrollLeft()+d.viewportWidth()-100)p-=this.n_c.width()+6;if(l>d.scrollTop()+d.viewportHeight()-
100)l-=this.n_c.height()+20;this.n_c.offset({left:p,top:l+12})},show:function(p){this._show=true;this.n_c.html(p).css("display","block")},hide:function(){this._show=false;this.n_c.css("display","none")},_init:function(){}});return r});
KISSY.add("chart/util",function(k){function r(l,d){this.duration=l*1E3;this.fnEasing=k.isString(d)?k.Easing[d]:d}var p=function(){var l=function a(e,h,f,g){var j=arguments.length;if(j<3){if(typeof e==="string"){e=e.substr(e.indexOf("#")+1);var o=e.length===3;e=parseInt(e,16);o&&(e=(e&3840)*4352|(e&240)*272|(e&15)*17)}j===2&&(g=h);h=(e&65280)/256;f=e&255;e>>>=16}if(!(this instanceof a))return new a(e,h,f,g);this.channels=[typeof e==="string"&&parseInt(e,16)||e,typeof h==="string"&&parseInt(h,16)||
h,typeof f==="string"&&parseInt(f,16)||f,typeof g!=="string"&&typeof g!=="number"&&1||typeof g==="string"&&parseFloat(g)||g]},d=l.prototype,b=Math,c;l.RGBtoHSL=function(a){var e=a[0],h=a[1];a=a[2];e/=255;h/=255;a/=255;var f=b.max(e,h,a),g=b.min(e,h,a),j,o=(f+g)/2;if(f===g)j=g=0;else{var m=f-g;g=o>0.5?m/(2-f-g):m/(f+g);switch(f){case e:j=(h-a)/m+(h<a?6:0);break;case h:j=(a-e)/m+2;break;case a:j=(e-h)/m+4}j/=6}return[j,g,o]};l.HSLtoRGB=function(a){var e=a[0],h=a[1],f=a[2];a=function(o,m,n){if(n<0)n+=
1;if(n>1)n-=1;if(n<1/6)return o+(m-o)*6*n;if(n<0.5)return m;if(n<2/3)return o+(m-o)*(2/3-n)*6;return o};if(h===0)h=f=e=f;else{var g=f<0.5?f*(1+h):f+h-f*h,j=2*f-g;h=a(j,g,e+1/3);f=a(j,g,e);e=a(j,g,e-1/3)}return[h*255,f*255,e*255]};l.rgb=function(a,e,h,f){return new l(a,e,h,typeof f!=="undefined"?f:1)};l.hsl=function(a,e,h,f){a=l.HSLtoRGB([a,e,h]);e=b.ceil;return new l(e(a[0]),e(a[1]),e(a[2]),typeof f!=="undefined"?f:1)};l.TO_STRING_METHOD="hexTriplet";l.parse=function(a){a=a.replace(/^\s+/g,"").toLowerCase();
if(a[0]==="#")return new l(a);var e=a.substr(0,3),h;a=a.replace(/[^\d,.]/g,"").split(",");for(h=a.length;h--;)a[h]=a[h]&&parseFloat(a[h])||0;switch(e){case "rgb":return l.rgb.apply(l,a);case "hsl":a[0]/=360;a[1]/=100;a[2]/=100;return l.hsl.apply(l,a)}return null};(l.clearColors=function(){c={transparent:[0,0,0,0]}})();l.define=function(a,e){c[a.toLowerCase()]=e};l.get=function(a){a=a.toLowerCase();if(Object.prototype.hasOwnProperty.call(c,a))return l.apply(null,[].concat(c[a]));return null};l.del=
function(a){return delete c[a.toLowerCase()]};l.random=function(a,e){typeof a==="string"&&(a=l.get(a))&&(a=a.getValue());typeof e==="string"&&(e=l.get(e))&&(e=e.getValue());var h=b.floor,f=b.random;e=(e||16777215)+1;if(!isNaN(a))return new l(h(f()*(e-a)+a));return new l(h(f()*e))};d.toString=function(){return this[l.TO_STRING_METHOD]()};d.valueOf=d.getValue=function(){var a=this.channels;return a[0]*65536|a[1]*256|a[2]};d.setValue=function(a){this.channels.splice(0,3,a>>>16,(a&65280)/256,a&255)};
d.hexTriplet="01".substr(-1)==="1"?function(){return"#"+("00000"+this.getValue().toString(16)).substr(-6)}:function(){var a=this.getValue().toString(16);return"#"+Array(a.length<6?6-a.length+1:0).join("0")+a};d.css=function(){return this.channels[3]===1?this.hexTriplet():this.rgba()};d.rgbData=function(){return this.channels.slice(0,3)};d.hslData=function(){return l.RGBtoHSL(this.rgbData())};d.rgb=function(){return"rgb("+this.rgbData().join(",")+")"};d.rgba=function(){return"rgba("+this.channels.join(",")+
")"};d.hsl=function(){var a=this.hslData();return"hsl("+a[0]*360+","+a[1]*100+"%,"+a[2]*100+"%)"};d.hsla=function(){var a=this.hslData();return"hsla("+a[0]*360+","+a[1]*100+"%,"+a[2]*100+"%,"+this.channels[3]+")"};return l}();k.augment(r,{init:function(){this.start=(new Date).getTime();this.finish=this.start+this.duration},get:function(){var l=(new Date).getTime();if(l>this.finish)return 1;return this.fnEasing((l-this.start)/this.duration)}});return{Color:p,numberFormat:function(l,d){if(typeof d===
"string"){var b=-1<d.indexOf(","),c=d.split(".");if(1<c.length)l=l.toFixed(c[1].length);else if(2<c.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period:"+d;else l=l.toFixed(0);var a=l.toString();if(b){c=a.split(".");b=c[0];a=[];for(var e=b.length,h=Math.floor(e/3),f=b.length%3||3,g=0;g<e;g+=f){if(g!=0)f=3;a[a.length]=b.substr(g,f);h-=1}a=a.join(",");if(c[1])a+="."+c[1]}return d.replace(/[\d,?\.?]+/,a)}},Anim:r}});
