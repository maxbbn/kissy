/*
Copyright 2012, KISSY UI Library v1.30dev
MIT Licensed
build time: Apr 10 11:07
*/
KISSY.add("chart/axis",function(j,r){function o(g,b){this.chart=b;this.type=g.type;this.data=g;this.axisData=g.axis();this.current_x=-1;this.initEvent();j.each(this.axisData,function(c){c.name=c.name?c.name:false});this.initdata()}var k=j.Event;j.augment(o,j.EventTarget,{initYLabel:function(){var g=this.data.config,b=this.axisData;g=Math.ceil((this.chart.height-g.paddingBottom-g.paddingTop)/40);var c=this.data.y_max/g,a=[];for(i=0;i<=g;i++)a.push(c*i);b.y.labels=a},initdata:function(g){this.initYLabel();
var b=this.chart,c=b.width,a=b.height,e=this.data.config;g=this.axisData;b=g.x;g=g.y;var d=b.labels.length,f=g.labels.length;c=c-e.paddingRight;var h=e.paddingLeft,l=a-e.paddingBottom;e=e.paddingTop;var q=(l-e)/(f-1),m=c-h,n,p,s=Math.ceil(120*d/m);b._lpath={x:c*2-h,y:a-l+20};b._path=[];b._area=[];b._showlabel=[];for(i=0;i<d;i++){if(this.type==="line"){n=m/(d-1);a=h+i*n;p=i===0?a:a-n/2;n=i===d-1?a:a+n/2}else{n=m/d;a=h+(i+0.5)*n;p=a-n/2;n=a+n/2}b._showlabel.push(i===0||i%s===0);b._path.push({left:p,
right:n,top:e,bottom:l,x:a});b._area.push(new r.RectPath(p,e,n-p,l-e))}g._lpath={x:(l-e)/2+e,y:-10};g._path=[];for(i=0;i<f;i++)g._path.push({y:l-q*i,left:h,right:c})},initEvent:function(){if(this.type==="line"){k.on(this.chart,"mouse_move",this.chartMouseMove,this);k.on(this.chart,"mouse_leave",this.chartMouseLeave,this)}},destory:function(){if(this.type==="line"){k.remove(this.chart,"mouse_move",this.chartMouseMove);k.remove(this.chart,"mouse_leave",this.chartMouseLeave)}},chartMouseMove:function(g){var b=
this;j.each(b.axisData.x._area,function(c,a){if(a!==b.current_x&&c.inpath(g.x,g.y)){b.current_x=a;b.fire("xaxishover",{index:a,x:b.axisData.x._path[a].x});b.fire("redraw");return false}})},chartMouseLeave:function(){this.current_x=-1;this.fire("redraw");this.fire("leave")},draw:function(g){var b=this.data.config,c=this.data.axis(),a=c.x,e=c.y,d=a.labels.length,f=e.labels.length,h=this.chart.width,l=this.type==="line",q=this.type==="bar",m,n;g.save();for(m=0;m<f;m++){n=e._path[m];c=e.labels[m];if(m%
2===1&&m>0){g.save();g.fillStyle=b.axisBackgroundColor;g.fillRect(n.left,n.y,n.right-n.left,e._path[m-1].y-n.y);g.restore()}if(m!==0&&m!==f-1){g.strokeStyle=b.axisGridColor;g.lineWidth="1.0";g.beginPath();g.moveTo(n.left,n.y);g.lineTo(n.right,n.y);g.stroke()}if(c){g.font="12px Tohoma";g.textAlign="right";g.textBaseline="middle";g.fillStyle=b.axisTextColor;g.fillText(c,n.left-5,n.y)}}for(m=0;m<d;m++){f=m===this.current_x;e=a._path[m];c=a.labels[m];n=a._showlabel[m];g.strokeStyle=l&&f?"#404040":b.axisGridColor;
g.lineWidth=l&&f?"1.6":"1.0";if(q)if(m!==0){g.beginPath();g.moveTo(e.left,e.bottom);g.lineTo(e.left,e.top);g.stroke()}if(l)if(m!==0&&m!==d-1){g.beginPath();g.moveTo(e.x,e.bottom);g.lineTo(e.x,e.top);g.stroke()}if(c&&n){g.font="13px Tahoma";g.textAlign=l&&m===0?"left":l&&m===d-1?"right":"center";g.textBaseline="top";g.fillStyle=b.axisTextColor;g.fillText(c,e.x,e.bottom+5)}}if(this.current_x!==-1){e=a._path[this.current_x];c=a.labels[this.current_x];g.font="12px Tahoma";a=g.measureText(c).width+6;g.fillStyle=
"#333";d=Math.max(e.x-a/2,b.paddingLeft);d=Math.min(d,h-b.paddingRight-a);g.fillRect(d,e.bottom,a,20);g.textAlign="left";g.fillStyle="#ffffff";g.fillText(c,d+2,e.bottom+5)}g.restore();this.drawLabels(g)},drawLabels:function(g){var b=this.data.axis(),c=this.data.config,a=b.y.name,e=b.x.name,d=b.x._lpath;b=b.y._lpath;if(!(c.hideYAxisName&&c.hideXAxisName)){g.save();g.font="10px Arial";g.fillStyle="#808080";g.textAlign="center";g.textBaseline="middle";c.hideXAxisName||g.fillText("("+e+")",d.x,d.y);if(!c.hideYAxisName){g.rotate(Math.PI/
2);g.translate(b.x,b.y);g.fillText("("+a+")",0,0)}g.restore()}}});return o},{requires:["chart/path"]});
KISSY.add("chart/chart",function(j,r,o,k,g,b){function c(){this.list=[];this.current_index=-1;this.init()}function a(d,f){if(!(this instanceof a))return new a(d,f);var h=this.elCanvas=j.one(d);if(h){this.width=parseInt(h.attr("width"),10);this.height=parseInt(h.attr("height"),10);this.elCanvas=h;this.ctx=-1;this.tooltip=chartManager.getTooltip();if(f){this.data=f;this._initContext()}chartManager.add(this)}}var e={left:40,top:40};j.augment(c,j.EventTarget,{add:function(d){var f=this,h;f.list.push(d);
h=f.list.length-1;d.on("active",function(){f.current_index!==h&&f.fire("focusChange");f.current_index=h})},remove:function(d){d.detach("mouseenter");j.each(self.list,function(f,h){if(f===h)self.list[h]=null})},getTooltip:function(){if(!this.tooltip)this.tooltip=new k;return this.tooltip},init:function(){j.one("body").on("mousemove",this._bodyMouseMove,this);return this},_bodyMouseMove:function(d){var f,h;if(this.current_index>-1)f=this.list[this.current_index];if(f){h=d.pageX-f.offset.left;d=d.pageY-
f.offset.top;h>0&&h<f.width&&d>0&&d<f.height?f.fire("mouse_move",{x:h,y:d}):f.fire("mouse_leave")}}});j.mix(a,{addType:function(d){j.mix(a.types,d)},types:{}});j.extend(a,j.Base,{render:function(d){var f=this;if(d)f.data=d;if(f.ctx==-1){f.data=d;f._initContext()}else if(f.ctx!==0){f._drawcfg=j.merge(e,d.config,{width:f.width,height:f.height});f._data=new o(d,f._drawcfg);d=f._data;f.initChart();f.element=new a.types[d.type](d,this,f._drawcfg);f.layers.push(f.element);d=d.config;var h=f.ctx.createLinearGradient(0,
0,0,f.height);f.backgroundFillStyle=null;if(d.backgroundStyle&&typeof d.backgroundStyle==="object"){h.addColorStop(0,d.backgroundStyle.start);h.addColorStop(1,d.backgroundStyle.end);f.backgroundFillStyle=h}else if(j.isString(d.backgroundStyle))f.backgroundFillStyle=d.backgroundStyle;setTimeout(function(){f._redraw();f.initEvent()},100)}},_initContext:function(){var d=this;if(typeof d.ctx!="object")if(d.elCanvas[0].getContext)setTimeout(function(){d.ctx=d.elCanvas[0].getContext("2d");d._contextReady()},
0);else{d.ctx=0;d._count=typeof d._count=="number"?d._count-1:30;d._count>=0?setTimeout(function(){d._initContext()},50):j.one("<p class='ks-chart-error' >\u7cdf\u4e86\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u8fd8\u4e0d\u652f\u6301\u6211\u4eec\u7684\u56fe\u8868</p>").insertAfter(d.elCanvas)}},_contextReady:function(){this.data&&this.render(this.data)},loading:function(){this.showMessage("\u8f7d\u5165\u4e2d...")},showMessage:function(d){var f=this.ctx,h=this.width/2,l=this.height/2;f.clearRect(0,0,this.width,this.height);f.save();f.font="12px Arial";f.textAlign="center";f.fillStyle="#808080";f.fillText(d,
h,l);f.restore()},initChart:function(){this.layers=[];this._updateOffset();this.loading();if(this.element){this.element.destory();this.element=null}if(this._event_inited){this.elCanvas.detach("mouseenter",this._mouseenterHandle).detach("mouseleave",this._mouseLeaveHandle);this.detach()}this.tooltip.hide()},initEvent:function(){var d=this;d._event_inited=true;d.elCanvas.on("mouseenter",d._mouseenterHandle,d).on("mouseleave",d._mouseLeaveHandle,d);d.on("mouse_leave",d._drawAreaLeave,d);d.element.on("redraw",
d._redraw,d).on("showtooltip",function(f){f=j.isString(f.message)?f.message:f.message.innerHTML;d.tooltip.show(f)}).on("hidetooltip",function(){d.tooltip.hide()})},draw:function(){var d=this.ctx,f=this._drawcfg;if(this.backgroundFillStyle){d.fillStyle=this.backgroundFillStyle;d.fillRect(0,0,f.width,f.height)}else d.clearRect(0,0,f.width,f.height);j.each(this.layers,function(h){h.draw(d,f)})},ctx:function(){if(this.ctx)return this.ctx;if(this.elCanvas[0].getContext)return this.ctx=this.elCanvas.getContext("2d");
else return null},_redraw:function(){this._redrawmark=true;this._running||this._run()},_run:function(){var d=this;clearTimeout(d._timeoutid);d._running=true;d._redrawmark=false;d._timeoutid=setTimeout(function(){d.draw();if(d._redrawmark)d._run();else d._running=false},1E3/24)},_drawAreaLeave:function(){this.tooltip.hide()},_mouseenterHandle:function(){this._updateOffset();this.fire("active")},_updateOffset:function(){return this.offset=this.elCanvas.offset()},_mouseLeaveHandle:function(){this.fire("mouse_leave")}});
a.addType(g);a.addType(b);chartManager=window.chartManager=new c;return j.Chart=a},{requires:["chart/util","chart/data","chart/simpletooltip","chart/chart_line","chart/chart_bar"]});
KISSY.add("chart/chart_bar",function(j,r,o,k,g){function b(c,a,e){this.data=c;this.chart=a;this.drawcfg=e;this.config=c.config;this.initData(e);this.current=[-1,-1];this.anim=new r.Anim(this.config.animationDuration,this.config.animationEasing);this.axis=new k(c,a);this.frame=new g(a,c);this.anim.init();this.initEvent()}j.augment(b,j.EventTarget,{initData:function(){var c=this,a=c.chart,e=a.width;a=a.height;var d=c.data,f=d.config,h=d.elements().length,l=d.maxElementLength(),q=f.paddingTop,m=f.paddingLeft,
n=a-f.paddingBottom,p=(e-f.paddingRight-m)/l,s=p/5/h,u=p/3/h,w=(p-(h-1)*s-2*u)/h,z=[],y,C,t,D;c.maxLength=l;c.items=z;c.data.eachElement(function(G,A,v){if(v===-1)v=0;z[A]||(z[A]={_x:[],_top:[],_left:[],_path:[],_width:[],_height:[],_colors:[],_dcolors:[],_labels:[]});var B=z[A];y=(n-q)*G.data/d.y_max;C=m+v*p+u+A*(w+s);t=n-y;D=r.Color(c.data.getColor(A,"bar"));A=D.hslData();var E=A[2],F=A[1];E=(E+F/2)*0.6-F/2;colord=new r.Color.hsl(A[0],F,E);B._left[v]=C;B._top[v]=t;B._width[v]=w;B._height[v]=y;B._path[v]=
new o.RectPath(C,t,w,y);B._x[v]=C+w/2;B._colors[v]=D;B._dcolors[v]=colord;B._labels[v]=G.label})},draw:function(c){var a=this,e=a.items,d=a.maxLength,f,h,l,q,m,n,p=a.anim.get(),s;a.axis.draw(c);a.frame.draw(c);a.data.config.showLabels&&a.drawNames(c);j.each(e,function(u,w){for(s=0;s<d;s++){m=u._left[s];l=u._height[s];q=l*p;n=u._top[s]+l-q;barwidth=u._width[s];f=u._colors[s];dcolor=u._dcolors[s];h=c.createLinearGradient(m,n,m,n+q);h.addColorStop(0,f.css());h.addColorStop(1,dcolor.css());c.fillStyle=
h;c.fillRect(m,n,barwidth,q);if(d===1&&l>25){c.save();c.fillStyle="#fff";c.font="20px bold Arial";c.textBaseline="top";c.textAlign="center";element=a.data.elements()[w];c.fillText(r.numberFormat(element.data,element.format),u._x[s],n+2);c.restore()}}});p<1&&a.fire("redraw")},initEvent:function(){this.chart.on("mouse_move",this.chartMouseMove,this);this.chart.on("mouse_leave",this.chartMouseLeave,this)},destory:function(){this.chart.detach("mouse_move",this.chartMouseMove);this.chart.detach("mouse_leave",
this.chartMouseLeave)},chartMouseMove:function(c){var a=[-1,-1],e=this.items;j.each(this.items,function(d,f){j.each(d._path,function(h,l){if(h.inpath(c.x,c.y))a=[f,l]})});if(!(a[0]===this.current[0]&&a[1]===this.current[1])){this.current=a;if(a[0]+a[1]>=0){this.fire("barhover",{index:a});this.fire("showtooltip",{top:e[a[0]]._top[a[1]],left:e[a[0]]._x[a[1]],message:this.getTooltip(a)})}else this.fire("hidetooltip")}},chartMouseLeave:function(){this.current=[-1,-1]},getTooltip:function(c){var a=c[1];
c=this.items[c[0]];return"<div class='bartip'><span style='color:"+c._colors[a].css()+";'>"+c._labels[a]+"</span></div>"},drawNames:function(c){var a=this.chart.width,e=this.data,d=this.data.elements(),f=e.config,h=d.length-1;a=a-f.paddingRight;f=f.paddingTop-12;for(var l,q;h>=0;h--){l=d[h];if(!l.notdraw){q=e.getColor(h);c.save();c.textAlign="end";c.textBaseline="middle";c.fillStyle="#808080";c.font="12px Arial";c.fillText(l.name,a,f);a-=c.measureText(l.name).width+10;c.restore();c.save();c.beginPath();
c.fillStyle=q;c.arc(a,f,5,0,Math.PI*2,true);c.closePath();c.fill();c.restore();a-=10}}}});return{bar:b}},{requires:["chart/util","chart/path","chart/axis","chart/frame"]});
KISSY.add("chart/chart_line",function(j,r,o,k){function g(b,c,a){this.chart=c;this.data=b;this.elements=b.elements();this._current=-1;this.config=b.config;this.drawcfg=a;this.initdata(a);this._ready_idx=-1;this.anim=new r.Anim(this.config.animationDuration,this.config.animationEasing);this.axis=new o(b,c,a);this.frame=new k(c,b);this.anim.init();this.init()}j.augment(g,j.EventTarget,{initdata:function(){var b=this.data,c=this.chart,a=c.width,e=c.height,d=b.config;c=b.maxElementLength();var f=d.paddingLeft,
h=b.y_max,l=e-d.paddingBottom;e=l-d.paddingTop;a=a-d.paddingRight-f;var q=a/(c-1),m=[];this.items=m;b.eachElement(function(n,p,s){m[p]||(m[p]={_points:[],_labels:[],_color:b.getColor(p),_maxtop:l,_drawbg:p===d.drawbg,_notdraw:n.notdraw});p=m[p];ptop=Math.max(l-n.data/h*e,d.paddingTop-5);p._maxtop=Math.min(p._maxtop,ptop);p._labels[s]=n.label;p._points[s]={x:f+q*s,y:ptop,nodata:n.data===null,bottom:l}})},draw:function(b,c){var a=this,e=a.data,d=e.config,f=d.paddingLeft,h=c.width-d.paddingRight,l=c.height-
d.paddingBottom,q,m,n,p,s,u,w=a.anim.get(),z;a.axis.draw(b,c);a.frame.draw(b,c);e.config.showLabels&&a.drawNames(b,c);if(w>=1&&this._ready_idx<a.items.length-1){a._ready_idx++;a.anim.init();w=a.anim.get()}if(this._ready_idx!==e.elements().length-1||w!==1)this.fire("redraw");j.each(a.items,function(y,C){var t;if(!y._notdraw){u=C!==a._ready_idx?C>a._ready_idx?0:1:w;q=y._color;n=y._points;if(y._drawbg){b.save();b.globalAlpha=0.4;maxtop=l-(l-y._maxtop)*u;z=b.createLinearGradient(f,maxtop,f,l);z.addColorStop(0,
q);z.addColorStop(1,"rgb(255,255,255)");b.fillStyle=z;b.beginPath();b.moveTo(f,l);for(p=0;p<n.length;p++){t=n[p];m=l-(l-t.y)*u;b.lineTo(t.x,m)}b.lineTo(h,l);b.stroke();b.fill();b.restore()}b.save();s=n.length;b.strokeStyle=q;b.lineWidth=2;b.beginPath();for(p=0;p<s;p++){t=n[p];if(!t.nodata){m=l-(l-t.y)*u;p===0?b.moveTo(t.x,m):b.lineTo(t.x,m)}}b.stroke();b.restore();b.save();for(p=0;p<s;p++){t=n[p];if(!t.nodata){m=l-(l-t.y)*u;b.fillStyle=q;b.beginPath();b.arc(t.x,m,5,0,Math.PI*2,true);b.closePath();
b.fill();if(p!==a._current){b.fillStyle="#fff";b.beginPath();b.arc(t.x,m,3,0,Math.PI*2,true);b.closePath();b.fill()}}}b.restore()}})},init:function(){this._ready_idx=0;this.axis.on("xaxishover",this._axis_hover,this).on("leave",this._axis_leave,this).on("redraw",this._redraw,this)},destory:function(){this.axis.detach("xaxishover",this._axis_hover).detach("leave",this._axis_leave).detach("redraw",this._redraw)},_redraw:function(){this.fire("redraw")},_axis_hover:function(b){b=b.index;if(this._current!==
b){this._current=b;this.fire("redraw");this.fire("showtooltip",{message:this.getTooltip(b)})}},_axis_leave:function(){this._current=-1;this.fire("redraw")},getTooltip:function(b){var c,a;c="<ul>";j.each(this.items,function(e){if(!e._points[b].nodata){a='<li><p style="color:'+e._color+'">'+e._labels[b]+"</p></li>";c+=a}});c+="</ul>";return c},drawNames:function(b){var c=this.chart.width,a=this.data,e=a.config;a=a.elements();var d=a.length-1;c=c-e.paddingRight;e=e.paddingTop-12;for(var f,h;d>=0;d--){f=
a[d];if(!f.notdraw){h=this.data.getColor(d);b.save();b.textAlign="end";b.textBaseline="middle";b.fillStyle="#808080";b.font="12px Arial";b.fillText(f.name,c,e);c-=b.measureText(f.name).width+10;b.restore();b.save();b.beginPath();b.fillStyle=h;b.arc(c,e,5,0,Math.PI*2,true);b.closePath();b.fill();b.restore();c-=10}}}});return{line:g}},{requires:["chart/util","chart/axis","chart/frame"]});
KISSY.add("chart/data",function(j,r){function o(b,c){if(b&&b.type){if(!this instanceof o)return new o(b);var a=b.config;this.origin=b;b=j.clone(b);this.type=b.type.toLowerCase();this.config=a=j.merge(k,g[this.type],a);j.each({left:"paddingLeft",top:"paddingTop",bottom:"paddingBottom",right:"paddingRight"},function(e,d){if(d in a&&j.isNumber(a[d]))a[e]=a[d]});this._elements=this._expandElement(this._initElement(b));this._initElementItem();this._axis=b.axis;this.y_max=this.getMax(this.max(),c)}}var k=
{paddingTop:30,paddingLeft:40,paddingRight:20,paddingBottom:20,showLabels:true,colors:[],animationDuration:0.5,animationEasing:"easeInStrong",hideYAxisName:false,hideXAxisName:true,backgroundStyle:false,axisTextColor:"#999",axisBackgroundColor:"rgba(238, 238, 238, 0.4)",axisGridColor:"#e4e4e4",numberFormat:null,frameColor:"#d7d7d7"},g={line:{drawbg:-1},bar:{},pie:{animationDuration:1.8,animationEasing:"bounceOut",paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,drawShadow:true,shadow:{blur:3,
color:"#000"},labelTemplate:"{name} {pecent}%",firstPieOut:false}};j.augment(o,{axis:function(){return this._axis},elements:function(){return this._elements},maxElementLength:function(){var b=0;j.each(this._elements,function(c){b=j.isArray(c.items)?Math.max(b,c.items.length):Math.max(b,1)});return b},getColor:function(b,c){var a=this._elements.length,e=this.config.colors;if(j.isArray(e)&&e[b])return e[b];if(j.isFunction(e))return e(b);return this.getDefaultColor(b,a,c)},sum:function(){var b=0;this.eachElement(function(c){b+=
c.data});return b},max:function(){return this._max},getMax:function(b,c){var a=this.config;a=Math.ceil((c.height-a.paddingBottom-a.paddingTop)/40);var e=b/a,d;if(e<=1)e=1;else if(e>1&&e<=5)e=Math.ceil(e);else if(e>5&&e<=10)e=10;else{d=1;do{d*=10;e/=10}while(e>10);e=Math.ceil(e)*d}return e*a},getDefaultColor:function(b,c){var a=1/3,e=a*b,d,f;if(b<3)e=a*b+0.05;else{if(c%3==0)if(b===c-1)b=c-2;else if(b===c-2)b=c-1;e=b%3;d=Math.ceil(c/3);f=Math.ceil((b+1)/3);e=e*a+a/d*(f-1)}return r.Color.hsl(e,0.7,0.65).hexTriplet()},
eachElement:function(b){j.each(this._elements,function(c,a){c.items?j.each(c.items,function(e,d){b(e,a,d)}):b(c,a,-1)})},_initElement:function(b){var c=null,a;if(b.elements&&j.isArray(b.elements))c=j.clone(b.elements);if(!b.elements&&b.element&&j.isArray(b.element.names)){c=[];a=b.element;j.each(a.names,function(e,d){c.push({name:e,data:j.isArray(a.datas)?a.datas[d]:null,label:j.isArray(a.labels)?a.labels[d]:a.label})})}return c},_expandElement:function(b){j.each(b,function(c){if(j.isArray(c.datas)){c.items=
[];j.each(c.datas,function(a,e){var d={name:c.name,data:a};d.label=j.isArray(c.labels)?c.labels[e]:c.label;c.items.push(d)})}});return b},_initElementItem:function(){var b=this;b._max=0;b.eachElement(function(c,a,e){if(a===0&&!e)b._max=c.data||0;c.data=j.isNumber(c.data)?c.data:null;b._max=Math.max(b._max,c.data);if(j.isArray(b.config.numberFormat))c.format=b.config.numberFormat[a];else if(j.isString(b.config.numberFormat))c.format=b.config.numberFormat;if(typeof c.format=="undefined")c.format=b.config.numberFormat;
c.label=j.substitute(typeof c.label==="undefined"?null:c.label,{name:c.name,data:c.format&&typeof c.data==="number"?r.numberFormat(c.data,c.format):c.data});c.notdraw=b._elements[a].notdraw})}});return o},{requires:["chart/util"]});
KISSY.add("chart/frame",function(j,r){function o(k,g){var b=g.config,c=k.width,a=k.height;this.data=g;this.path=new r.RectPath(b.paddingLeft,b.paddingTop,c-b.paddingRight-b.paddingLeft,a-b.paddingBottom-b.paddingTop)}j.augment(o,{draw:function(k){k.save();k.strokeStyle=this.data.config.frameColor;k.lineWidth=2;this.path.draw(k);k.stroke();k.restore()}});return o},{requires:["chart/path"]});KISSY.add("chart",function(j,r){return r},{requires:["chart/chart"]});
KISSY.add("chart/path",function(j){function r(){}function o(g,b,c,a){this.rect={x:g,y:b,w:c,h:a}}function k(g,b,c,a,e,d){this._arc={x:g,y:b,r:c,b:a,e:e,a:d}}j.augment(r,{draw:function(){},inpath:function(){}});j.extend(o,r,{draw:function(g){var b=this.rect;g.beginPath();g.rect(b.x,b.y,b.w,b.h)},inpath:function(g,b){var c=this.rect,a=c.x,e=c.y,d=a+c.w;c=e+c.h;return g>a&&g<d&&b>e&&b<c}});j.extend(k,r,{draw:function(g){var b=this._arc;g.beginPath();g.moveTo(b,x,b.y);g.arc(b.x,b.y,b.r,b.b,b.e,b.a);g.closePath()},
inpath:function(g,b,c){if(c){this.draw(c);return c.isPointInPath(g,b)}b=this._arc;c=g-b.x;g=g-b.y;if(!(Math.pow(c,2)+Math.pow(g,2)<=Math.pow(b.r,2)))return false;if(c===0)if(g===0)return false;else da=g>0?Math.PI/2:Math.PI*1.5}});return{Path:r,RectPath:o,ArcPath:k}});
KISSY.add("chart/simpletooltip",function(j){function r(){var o=this;o.n_c=j.all("<div class='ks-chart-tooltip'>");o._offset={left:0,top:0};o.hide();j.ready(function(){j.one("body").append(o.n_c).on("mousemove",o._mousemove,o)})}j.augment(r,{_mousemove:function(o){var k=o.pageX;o=o.pageY;if(this._show)this._updateOffset(k,o);else{this._offset.left=k;this._offset.top=o}},_updateOffset:function(o,k){var g=j.DOM;if(o>g.scrollLeft()+g.viewportWidth()-100)o-=this.n_c.width()+6;if(k>g.scrollTop()+g.viewportHeight()-
100)k-=this.n_c.height()+20;this.n_c.offset({left:o,top:k+12})},show:function(o){this._show=true;this.n_c.html(o).css("display","block")},hide:function(){this._show=false;this.n_c.css("display","none")},_init:function(){}});return r});
KISSY.add("chart/util",function(j){function r(k,g){this.duration=k*1E3;this.fnEasing=j.isString(g)?j.Easing[g]:g}var o=function(){var k=function a(e,d,f,h){var l=arguments.length;if(l<3){if(typeof e==="string"){e=e.substr(e.indexOf("#")+1);var q=e.length===3;e=parseInt(e,16);q&&(e=(e&3840)*4352|(e&240)*272|(e&15)*17)}l===2&&(h=d);d=(e&65280)/256;f=e&255;e>>>=16}if(!(this instanceof a))return new a(e,d,f,h);this.channels=[typeof e==="string"&&parseInt(e,16)||e,typeof d==="string"&&parseInt(d,16)||
d,typeof f==="string"&&parseInt(f,16)||f,typeof h!=="string"&&typeof h!=="number"&&1||typeof h==="string"&&parseFloat(h)||h]},g=k.prototype,b=Math,c;k.RGBtoHSL=function(a){var e=a[0],d=a[1];a=a[2];e/=255;d/=255;a/=255;var f=b.max(e,d,a),h=b.min(e,d,a),l,q=(f+h)/2;if(f===h)l=h=0;else{var m=f-h;h=q>0.5?m/(2-f-h):m/(f+h);switch(f){case e:l=(d-a)/m+(d<a?6:0);break;case d:l=(a-e)/m+2;break;case a:l=(e-d)/m+4}l/=6}return[l,h,q]};k.HSLtoRGB=function(a){var e=a[0],d=a[1],f=a[2];a=function(q,m,n){if(n<0)n+=
1;if(n>1)n-=1;if(n<1/6)return q+(m-q)*6*n;if(n<0.5)return m;if(n<2/3)return q+(m-q)*(2/3-n)*6;return q};if(d===0)d=f=e=f;else{var h=f<0.5?f*(1+d):f+d-f*d,l=2*f-h;d=a(l,h,e+1/3);f=a(l,h,e);e=a(l,h,e-1/3)}return[d*255,f*255,e*255]};k.rgb=function(a,e,d,f){return new k(a,e,d,typeof f!=="undefined"?f:1)};k.hsl=function(a,e,d,f){a=k.HSLtoRGB([a,e,d]);e=b.ceil;return new k(e(a[0]),e(a[1]),e(a[2]),typeof f!=="undefined"?f:1)};k.TO_STRING_METHOD="hexTriplet";k.parse=function(a){a=a.replace(/^\s+/g,"").toLowerCase();
if(a[0]==="#")return new k(a);var e=a.substr(0,3),d;a=a.replace(/[^\d,.]/g,"").split(",");for(d=a.length;d--;)a[d]=a[d]&&parseFloat(a[d])||0;switch(e){case "rgb":return k.rgb.apply(k,a);case "hsl":a[0]/=360;a[1]/=100;a[2]/=100;return k.hsl.apply(k,a)}return null};(k.clearColors=function(){c={transparent:[0,0,0,0]}})();k.define=function(a,e){c[a.toLowerCase()]=e};k.get=function(a){a=a.toLowerCase();if(Object.prototype.hasOwnProperty.call(c,a))return k.apply(null,[].concat(c[a]));return null};k.del=
function(a){return delete c[a.toLowerCase()]};k.random=function(a,e){typeof a==="string"&&(a=k.get(a))&&(a=a.getValue());typeof e==="string"&&(e=k.get(e))&&(e=e.getValue());var d=b.floor,f=b.random;e=(e||16777215)+1;if(!isNaN(a))return new k(d(f()*(e-a)+a));return new k(d(f()*e))};g.toString=function(){return this[k.TO_STRING_METHOD]()};g.valueOf=g.getValue=function(){var a=this.channels;return a[0]*65536|a[1]*256|a[2]};g.setValue=function(a){this.channels.splice(0,3,a>>>16,(a&65280)/256,a&255)};
g.hexTriplet="01".substr(-1)==="1"?function(){return"#"+("00000"+this.getValue().toString(16)).substr(-6)}:function(){var a=this.getValue().toString(16);return"#"+Array(a.length<6?6-a.length+1:0).join("0")+a};g.css=function(){return this.channels[3]===1?this.hexTriplet():this.rgba()};g.rgbData=function(){return this.channels.slice(0,3)};g.hslData=function(){return k.RGBtoHSL(this.rgbData())};g.rgb=function(){return"rgb("+this.rgbData().join(",")+")"};g.rgba=function(){return"rgba("+this.channels.join(",")+
")"};g.hsl=function(){var a=this.hslData();return"hsl("+a[0]*360+","+a[1]*100+"%,"+a[2]*100+"%)"};g.hsla=function(){var a=this.hslData();return"hsla("+a[0]*360+","+a[1]*100+"%,"+a[2]*100+"%,"+this.channels[3]+")"};return k}();j.augment(r,{init:function(){this.start=(new Date).getTime();this.finish=this.start+this.duration},get:function(){var k=(new Date).getTime();if(k>this.finish)return 1;return this.fnEasing((k-this.start)/this.duration)}});return{Color:o,numberFormat:function(k,g){if(typeof g===
"string"){var b=-1<g.indexOf(","),c=g.split(".");if(1<c.length)k=k.toFixed(c[1].length);else if(2<c.length)throw"NumberFormatException: invalid format, formats should have no more than 1 period:"+g;else k=k.toFixed(0);var a=k.toString();if(b){c=a.split(".");b=c[0];a=[];for(var e=b.length,d=Math.floor(e/3),f=b.length%3||3,h=0;h<e;h+=f){if(h!=0)f=3;a[a.length]=b.substr(h,f);d-=1}a=a.join(",");if(c[1])a+="."+c[1]}return g.replace(/[\d,?\.?]+/,a)}},Anim:r}});
